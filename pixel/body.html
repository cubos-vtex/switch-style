<!-- Init Switch Style Script -->
<script id="switch-style-script">
  function switchStyle() {
    const { query } = __RUNTIME__
    const parameter = decodeURIComponent('{{settings.parameter}}' || 'color')
    const colors = decodeURIComponent(
      '{{settings.colors}}' || 'red,green,magenta'
    )
    const color = query[parameter]
    const possibleColors = colors?.split(',') || []
    const length = possibleColors.length

    if (length && color && +color > 0 && +color < length + 1) {
      const selectedColor = possibleColors[+color - 1]?.trim()

      if (selectedColor) {
        const newStyle = document.createElement('style')

        let style = ':root {'
        style += `\n  --background-action-primary: ${selectedColor};`
        style += `\n  --background-emphasis: ${selectedColor};`
        style += `\n  --text-action-primary: ${selectedColor};`
        style += `\n  --text-emphasis: ${selectedColor};`
        style += `\n  --border-action-primary: ${selectedColor};`
        style += `\n  --border-emphasis: ${selectedColor};`
        style += '\n}'

        newStyle.innerHTML = style

        document.head.appendChild(newStyle)
      }
    }
  }

  window.addEventListener('DOMContentLoaded', switchStyle)
</script>
<!-- End Switch Style Script -->
